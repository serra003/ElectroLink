<!DOCTYPE html>
<html lang="en" class="transition-colors duration-300" style="height: auto; min-height: 100%;">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Products - ElectroLink</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            // Dark Mode - Navy Blue Theme
            navyDark: '#0A1628',
            navyBox: '#1A2942',
            navyAccent: '#2D4263',
            
            // Light Mode - Blue, White, Orange
            lightBg: '#F8FAFC',
            lightBox: '#FFFFFF',
            lightAccent: '#E0F2FE',
            
            // Brand Colors
            primary: '#0066FF',
            accent: '#FF6B35',
            accentHover: '#FF8C5A',
          }
        }
      }
    }
  </script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    * { 
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    .dark .glass { 
      background: rgba(26, 41, 66, 0.7); 
      backdrop-filter: blur(10px); 
      border: 1px solid rgba(255,255,255,0.08); 
    }
    
    .light .glass { 
      background: rgba(255, 255, 255, 0.8); 
      backdrop-filter: blur(10px); 
      border: 1px solid rgba(0, 102, 255, 0.1); 
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }
    
    .glow-hover:hover { 
      box-shadow: 0 0 30px rgba(0, 102, 255, 0.4); 
    }
    
    .product-card { 
      transition: transform .3s ease, box-shadow .3s ease; 
    }
    
    .product-card:hover { 
      transform: translateY(-8px); 
    }
    
    .dark .product-card:hover {
      box-shadow: 0 10px 30px rgba(0, 102, 255, 0.3);
    }
    
    .light .product-card:hover {
      box-shadow: 0 10px 30px rgba(0, 102, 255, 0.2);
    }
    
    .modal { 
      display:none; 
      position:fixed; 
      inset:0; 
      z-index:1000; 
      background: rgba(0,0,0,0.75); 
      align-items:center; 
      justify-content:center; 
    }
    
    .modal.active { 
      display:flex; 
    }
    
    .lang-picker { 
      min-width: 160px; 
    }
    
    .lang-option:hover { 
      background: rgba(0, 102, 255, 0.1); 
    }
    
    .gradient-text { 
      background: linear-gradient(135deg, #0066FF 0%, #FF6B35 100%); 
      -webkit-background-clip: text; 
      -webkit-text-fill-color: transparent; 
      background-clip: text; 
    }
    
    .logo-hover {
      transition: transform 0.3s ease;
    }
    
    .logo-hover:hover {
      transform: scale(1.05);
    }
    
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>

<body id="pageBody" class="bg-lightBg dark:bg-navyDark text-gray-900 dark:text-gray-100 min-h-screen transition-colors duration-300">

  <!-- Navbar -->
  <nav class="glass fixed w-full top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
<div class="flex justify-between items-center h-18 md:h-20">
        
        <!-- Logo Section -->
        <div class="flex items-center space-x-3">
         <a href="/" class="flex items-center logo-hover">
  <img id="logoImage"
       src="/static/images/actual logo"
       alt="ElectroLink"
       class="h-16 md:h-20 w-auto transition-all duration-300">
</a>

        </div>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-right space-x-8 ml-20" id="navLinks">
        <a href="/"
           class="leading-none text-gray-700 dark:text-gray-300 hover:text-primary transition font-medium">
          Home
        </a>
        <a href="/products"
           class="leading-none text-primary font-semibold transition">
          Products
        </a>
        <a href="/#contact"
           class="leading-none text-gray-700 dark:text-gray-300 hover:text-primary transition font-medium">
          Contact
        </a>
      </div>


        <div class="flex items-center space-x-3">
          <!-- Theme toggle -->
          <button id="themeToggle" class="glass p-2 rounded-lg flex items-center justify-center hover:scale-105 transition" aria-label="Toggle theme">
            <i id="themeIcon" class="fas fa-moon text-gray-700 dark:text-gray-300"></i>
          </button>

          <!-- Language picker -->
          <div class="relative">
            <button id="langBtn" class="glass px-3 py-2 rounded-lg flex items-center gap-2 lang-picker focus:outline-none">
              <span id="langFlag">ðŸ‡¬ðŸ‡§</span>
              <span id="langLabel" class="text-sm text-gray-700 dark:text-gray-300">English</span>
              <i class="fas fa-chevron-down text-gray-600 dark:text-gray-400 text-xs"></i>
            </button>

            <div id="langDropdown" class="absolute right-0 mt-2 w-44 glass rounded-lg py-2 hidden">
              <button class="w-full text-left px-4 py-2 flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 lang-option" data-lang="en"><span>ðŸ‡¬ðŸ‡§</span><span>English</span></button>
              <button class="w-full text-left px-4 py-2 flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 lang-option" data-lang="tr"><span>ðŸ‡¹ðŸ‡·</span><span>TÃ¼rkÃ§e</span></button>
              <button class="w-full text-left px-4 py-2 flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300 lang-option" data-lang="az"><span>ðŸ‡¦ðŸ‡¿</span><span>AzÉ™rbaycan</span></button>
            </div>
          </div>

          <button id="mobileMenuBtn" class="md:hidden text-gray-700 dark:text-gray-300 ml-2">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="hidden md:hidden glass border-t border-gray-300 dark:border-gray-700">
      <div class="px-4 py-4 space-y-3">
        <a href="/" data-i18n="nav_home" class="block text-gray-700 dark:text-gray-300 hover:text-primary transition font-medium">Home</a>
        <a href="/products" data-i18n="nav_products" class="block text-primary font-semibold transition">Products</a>
        <a href="/#contact" data-i18n="nav_contact" class="block text-gray-700 dark:text-gray-300 hover:text-primary transition font-medium">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <section class="pt-24 pb-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-primary/10 via-transparent to-accent/10"></div>
    <div class="max-w-7xl mx-auto relative z-10">
      <h1 class="text-4xl sm:text-5xl font-bold text-center mb-4">
        <span class="gradient-text" data-i18n="all_products">All Products</span>
      </h1>
      <p class="text-gray-600 dark:text-gray-400 text-center text-lg" data-i18n="products_subtitle">
        Browse our complete collection of premium tech products
      </p>
    </div>
  </section>

  <!-- All Products with Filters -->
  <section class="py-8 px-4 sm:px-6 lg:px-8 bg-white dark:bg-navyDark">
    <div class="max-w-7xl mx-auto">
      
      <!-- Filters -->
      <div class="glass rounded-2xl p-6 mb-8 grid sm:grid-cols-3 gap-6">
        <select id="categoryFilter" class="bg-lightBox dark:bg-navyBox border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary">
          <option value="all" data-i18n="filter_all">All Categories</option>
          <option value="phones" data-i18n="filter_phones">Phones</option>
          <option value="laptops" data-i18n="filter_laptops">Laptops</option>
          <option value="monitors" data-i18n="filter_monitors">Monitors</option>
          <option value="accessories" data-i18n="filter_accessories">Accessories</option>
        </select>

        <select id="priceFilter" class="bg-lightBox dark:bg-navyBox border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary">
          <option value="all" data-i18n="price_all">All Prices</option>
          <option value="0-500" data-i18n="price_0_500">$0 - $500</option>
          <option value="500-1000" data-i18n="price_500_1000">$500 - $1000</option>
          <option value="1000-2000" data-i18n="price_1000_2000">$1000 - $2000</option>
          <option value="2000+" data-i18n="price_2000">$2000+</option>
        </select>

        <select id="sortFilter" class="bg-lightBox dark:bg-navyBox border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-3 text-gray-800 dark:text-white focus:ring-2 focus:ring-primary">
          <option value="default" data-i18n="sort_default">Default</option>
          <option value="name-asc" data-i18n="sort_name_asc">Name (Aâ€“Z)</option>
          <option value="name-desc" data-i18n="sort_name_desc">Name (Zâ€“A)</option>
          <option value="price-asc" data-i18n="sort_price_asc">Price (Low â†’ High)</option>
          <option value="price-desc" data-i18n="sort_price_desc">Price (High â†’ Low)</option>
        </select>
      </div>

      <!-- Products Count -->
      <div class="mb-6">
        <p class="text-gray-600 dark:text-gray-400">
          <span data-i18n="showing">Showing</span> 
          <span id="productCount" class="text-primary font-semibold">0</span> 
          <span data-i18n="products_text">products</span>
        </p>
      </div>

      <!-- Grid -->
      <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>

      <!-- No Results -->
      <div id="noResults" class="hidden text-center py-16">
        <i class="fas fa-search text-6xl text-gray-400 mb-4"></i>
        <h3 class="text-2xl font-semibold text-gray-700 dark:text-gray-300 mb-2" data-i18n="no_results">No products found</h3>
        <p class="text-gray-500 dark:text-gray-400" data-i18n="try_different">Try adjusting your filters</p>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="glass border-t border-gray-300 dark:border-gray-700 py-8 text-center mt-16">
    <div class="max-w-7xl mx-auto px-4">
      <p class="text-gray-600 dark:text-gray-400 text-sm" data-i18n="footer_copy">Â© 2024 ElectroLink. Premium tech for modern innovators.</p>
    </div>
  </footer>

  <!-- Modal -->
  <div id="productModal" class="modal">
    <div class="glass rounded-2xl max-w-4xl w-full mx-4 p-6 sm:p-8 relative">
      <button onclick="closeModal()" class="absolute top-4 right-4 w-10 h-10 bg-gray-200 dark:bg-navyBox rounded-lg flex items-center justify-center hover:bg-primary transition">
        <i class="fas fa-times text-gray-700 dark:text-white"></i>
      </button>
      <div class="grid md:grid-cols-2 gap-8">
        <img id="modalImage" class="rounded-xl object-cover w-full h-full" alt="product image"/>
        <div>
          <span id="modalCategory" class="text-xs text-gray-500 uppercase tracking-wide"></span>
          <h3 id="modalTitle" class="text-3xl font-bold mb-4 text-gray-800 dark:text-gray-100"></h3>
          <p id="modalDescription" class="text-gray-600 dark:text-gray-400 mb-6"></p>
          <div class="flex items-center justify-between mb-6 p-4 bg-lightAccent dark:bg-navyDark rounded-lg">
            <span class="text-gray-600 dark:text-gray-400 font-medium" data-i18n="modal_price_label">Price</span>
            <span id="modalPrice" class="text-3xl font-bold text-primary"></span>
          </div>
          <button class="w-full px-6 py-4 bg-gradient-to-r from-primary to-accent rounded-lg text-white font-semibold glow-hover transition transform hover:scale-105">
            <i class="fas fa-envelope mr-2"></i><span data-i18n="modal_contact">Contact to Inquire</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- SCRIPT -->
  <script>
    // ---------- Translations ----------
    const translations = {
      en: {
        nav_home: "Home", nav_products: "Products", nav_contact: "Contact",
        all_products: "All Products",
        products_subtitle: "Browse our complete collection of premium tech products",
        filter_all: "All Categories", filter_phones: "Phones", filter_laptops: "Laptops", 
        filter_monitors: "Monitors", filter_accessories: "Accessories",
        price_all: "All Prices", price_0_500: "$0 - $500", price_500_1000: "$500 - $1000",
        price_1000_2000: "$1000 - $2000", price_2000: "$2000+",
        sort_default: "Default", sort_name_asc: "Name (Aâ€“Z)", sort_name_desc: "Name (Zâ€“A)",
        sort_price_asc: "Price (Low â†’ High)", sort_price_desc: "Price (High â†’ Low)",
        footer_copy: "Â© 2024 ElectroLink. Premium tech for modern innovators.",
        modal_price_label: "Price", modal_contact: "Contact to Inquire",
        showing: "Showing", products_text: "products",
        no_results: "No products found", try_different: "Try adjusting your filters"
      },
      tr: {
        nav_home: "Ana Sayfa", nav_products: "ÃœrÃ¼nler", nav_contact: "Ä°letiÅŸim",
        all_products: "TÃ¼m ÃœrÃ¼nler",
        products_subtitle: "Premium teknoloji Ã¼rÃ¼nlerimizin tam koleksiyonunu inceleyin",
        filter_all: "TÃ¼m Kategoriler", filter_phones: "Telefonlar", 
        filter_laptops: "DizÃ¼stÃ¼ Bilgisayarlar", filter_monitors: "MonitÃ¶rler", 
        filter_accessories: "Aksesuarlar",
        price_all: "TÃ¼m Fiyatlar", price_0_500: "$0 - $500", price_500_1000: "$500 - $1000",
        price_1000_2000: "$1000 - $2000", price_2000: "$2000+",
        sort_default: "VarsayÄ±lan", sort_name_asc: "Ä°sim (Aâ€“Z)", sort_name_desc: "Ä°sim (Zâ€“A)",
        sort_price_asc: "Fiyat (DÃ¼ÅŸÃ¼k â†’ YÃ¼ksek)", sort_price_desc: "Fiyat (YÃ¼ksek â†’ DÃ¼ÅŸÃ¼k)",
        footer_copy: "Â© 2024 ElectroLink. Modern yenilikÃ§iler iÃ§in premium teknoloji.",
        modal_price_label: "Fiyat", modal_contact: "Ä°ncelemek Ä°Ã§in Ä°letiÅŸime GeÃ§in",
        showing: "GÃ¶steriliyor", products_text: "Ã¼rÃ¼n",
        no_results: "ÃœrÃ¼n bulunamadÄ±", try_different: "Filtreleri ayarlamayÄ± deneyin"
      },
      az: {
        nav_home: "Ana SÉ™hifÉ™", nav_products: "MÉ™hsullar", nav_contact: "ÆlaqÉ™",
        all_products: "BÃ¼tÃ¼n MÉ™hsullar",
        products_subtitle: "Premium texnologiya mÉ™hsullarÄ±mÄ±zÄ±n tam kolleksiyasÄ±na baxÄ±n",
        filter_all: "BÃ¼tÃ¼n Kateqoriyalar", filter_phones: "Telefonlar", 
        filter_laptops: "Noutbuklar", filter_monitors: "Monitorlar", 
        filter_accessories: "Aksesuarlar",
        price_all: "BÃ¼tÃ¼n QiymÉ™tlÉ™r", price_0_500: "$0 - $500", price_500_1000: "$500 - $1000",
        price_1000_2000: "$1000 - $2000", price_2000: "$2000+",
        sort_default: "Defolt", sort_name_asc: "Ad (Aâ€“Z)", sort_name_desc: "Ad (Zâ€“A)",
        sort_price_asc: "QiymÉ™t (AÅŸaÄŸÄ± â†’ YÃ¼ksÉ™k)", sort_price_desc: "QiymÉ™t (YÃ¼ksÉ™k â†’ AÅŸaÄŸÄ±)",
        footer_copy: "Â© 2024 ElectroLink. MÃ¼asir yenilikÃ§ilÉ™r Ã¼Ã§Ã¼n premium texnologiya.",
        modal_price_label: "QiymÉ™t", modal_contact: "SoruÅŸmaq Ã¼Ã§Ã¼n ÆlaqÉ™",
        showing: "GÃ¶stÉ™rilir", products_text: "mÉ™hsul",
        no_results: "MÉ™hsul tapÄ±lmadÄ±", try_different: "FiltrlÉ™ri dÉ™yiÅŸdirmÉ™yi sÄ±nayÄ±n"
      }
    };

    // ---------- State ----------
    let products = [];
    let filteredProducts = [];
    let currentLang = localStorage.getItem('lang') || 'en';

    // ---------- Fetch products from backend ----------
    async function loadProducts() {
      try {
        const response = await fetch('/api/products');
        const data = await response.json();
        if (data.success) {
          products = data.products;
          filteredProducts = [...products];
          applyFilters();
        }
      } catch (error) {
        console.error('Error loading products:', error);
      }
    }

    // ---------- Language helpers ----------
    function tAll(lang) {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
          el.textContent = translations[lang][key];
        }
      });
      const flag = lang === 'en' ? 'ðŸ‡¬ðŸ‡§' : lang === 'tr' ? 'ðŸ‡¹ðŸ‡·' : 'ðŸ‡¦ðŸ‡¿';
      const label = lang === 'en' ? 'English' : lang === 'tr' ? 'TÃ¼rkÃ§e' : 'AzÉ™rbaycan';
      document.getElementById('langFlag').textContent = flag;
      document.getElementById('langLabel').textContent = label;
      renderProducts();
    }

    // ---------- Render products ----------
    function renderProducts() {
      const grid = document.getElementById('productsGrid');
      const noResults = document.getElementById('noResults');
      const countEl = document.getElementById('productCount');
      
      countEl.textContent = filteredProducts.length;

      if (filteredProducts.length === 0) {
        grid.innerHTML = '';
        noResults.classList.remove('hidden');
        return;
      }

      noResults.classList.add('hidden');
      grid.innerHTML = filteredProducts.map(product => {
        const desc = currentLang === 'tr' ? product.description_tr : 
                     currentLang === 'az' ? product.description_az : 
                     product.description_en;
        return `
          <div class="glass rounded-2xl p-4 product-card cursor-pointer bg-lightBox dark:bg-navyBox" onclick="openModal(${product.id})">
            <div class="aspect-square rounded-xl overflow-hidden mb-4 bg-gray-200 dark:bg-navyDark">
              <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover">
            </div>
            <h3 class="text-lg font-semibold mb-1 text-gray-800 dark:text-gray-100">${product.name}</h3>
            <p class="text-gray-600 dark:text-gray-400 text-sm mb-3 line-clamp-2">${desc}</p>
            <div class="flex justify-between items-center">
              <span class="text-primary font-bold text-xl">$${product.price}</span>
              <span class="text-accent text-xs font-semibold uppercase tracking-wide">${product.category}</span>
            </div>
          </div>
        `;
      }).join('');
    }

    // ---------- Modal ----------
    function openModal(id) {
      const p = products.find(x => x.id === id);
      if (!p) return;
      const desc = currentLang === 'tr' ? p.description_tr : 
                   currentLang === 'az' ? p.description_az : 
                   p.description_en;
      document.getElementById('modalTitle').innerText = p.name;
      document.getElementById('modalImage').src = p.image;
      document.getElementById('modalDescription').innerText = desc;
      document.getElementById('modalPrice').innerText = '$' + p.price;
      document.getElementById('modalCategory').innerText = p.category;
      document.getElementById('productModal').classList.add('active');
    }
    
    function closeModal() { 
      document.getElementById('productModal').classList.remove('active'); 
    }
    
    document.getElementById('productModal').addEventListener('click', (e) => {
      if (e.target.id === 'productModal') closeModal();
    });

    // ---------- Filters ----------
    const categoryFilter = document.getElementById('categoryFilter');
    const priceFilter = document.getElementById('priceFilter');
    const sortFilter = document.getElementById('sortFilter');

    function applyFilters() {
      const cat = categoryFilter.value;
      const priceRange = priceFilter.value;
      const sort = sortFilter.value;

      filteredProducts = products.filter(product => {
        const catMatch = cat === 'all' || product.category === cat;
        let priceMatch = true;
        if (priceRange !== 'all') {
          if (priceRange === '0-500') priceMatch = product.price <= 500;
          else if (priceRange === '500-1000') priceMatch = product.price > 500 && product.price <= 1000;
          else if (priceRange === '1000-2000') priceMatch = product.price > 1000 && product.price <= 2000;
          else if (priceRange === '2000+') priceMatch = product.price > 2000;
        }
        return catMatch && priceMatch;
      });

      // Sort
      if (sort === 'name-asc') filteredProducts.sort((a,b) => a.name.localeCompare(b.name));
      else if (sort === 'name-desc') filteredProducts.sort((a,b) => b.name.localeCompare(a.name));
      else if (sort === 'price-asc') filteredProducts.sort((a,b) => a.price - b.price);
      else if (sort === 'price-desc') filteredProducts.sort((a,b) => b.price - a.price);

      renderProducts();
    }

    categoryFilter.addEventListener('change', applyFilters);
    priceFilter.addEventListener('change', applyFilters);
    sortFilter.addEventListener('change', applyFilters);

    // ---------- Theme toggle with logo switching ----------
    const themeToggle = document.getElementById('themeToggle');
    const themeIcon = document.getElementById('themeIcon');
    const logoImage = document.getElementById('logoImage');
    const root = document.documentElement;
    
    function applyTheme(theme) {
      if (theme === 'dark') {
        root.classList.add('dark');
        root.classList.remove('light');
        themeIcon.className = 'fas fa-sun text-yellow-400';
        logoImage.src = '/static/images/actual logo.png';
      } else {
        root.classList.remove('dark');
        root.classList.add('light');
        themeIcon.className = 'fas fa-moon text-gray-700';
        logoImage.src = '/static/images/Screenshot 2025-12-12 200551.png';
      }
      localStorage.setItem('theme', theme);
    }
    
    const savedTheme = localStorage.getItem('theme') || 'light';
    applyTheme(savedTheme);
    
    themeToggle.addEventListener('click', () => {
      const next = root.classList.contains('dark') ? 'light' : 'dark';
      applyTheme(next);
    });

    // ---------- Language picker ----------
    const langBtn = document.getElementById('langBtn');
    const langDropdown = document.getElementById('langDropdown');
    
    langBtn.addEventListener('click', () => {
      langDropdown.classList.toggle('hidden');
    });
    
    document.addEventListener('click', (e) => {
      if (!langBtn.contains(e.target) && !langDropdown.contains(e.target)) 
        langDropdown.classList.add('hidden');
    });

    document.querySelectorAll('.lang-option').forEach(btn => {
      btn.addEventListener('click', (ev) => {
        const lang = ev.currentTarget.dataset.lang;
        currentLang = lang;
        localStorage.setItem('lang', lang);
        tAll(lang);
        langDropdown.classList.add('hidden');
      });
    });

    // ---------- Mobile menu ----------
    document.getElementById('mobileMenuBtn').addEventListener('click', () => {
      document.getElementById('mobileMenu').classList.toggle('hidden');
    });

    // ---------- Init ----------
    currentLang = localStorage.getItem('lang') || currentLang;
    tAll(currentLang);
    loadProducts();
  </script>
</body>
</html>